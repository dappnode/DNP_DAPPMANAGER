# DAppNode System Architecture Diagrams

This directory contains architectural diagrams and visual representations of DAppNode's system design.

## 🏗️ High-Level System Overview

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           DAppNode Manager                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────────────┐ │
│  │                 │    │                 │    │                         │ │
│  │    Admin UI     │◄──►│   DAppManager   │◄──►│    User Packages       │ │
│  │   (Frontend)    │    │    (Backend)    │    │   (Blockchain Apps)     │ │
│  │  React + Redux  │    │  Node.js + API  │    │  Docker Containers      │ │
│  │                 │    │                 │    │                         │ │
│  └─────────────────┘    └─────────────────┘    └─────────────────────────┘ │
│           │                       │                         │               │
│           ▼                       ▼                         ▼               │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────────────┐ │
│  │                 │    │                 │    │                         │ │
│  │   Core Services │    │    Daemons      │    │      Networking         │ │
│  │  Bind, WiFi,    │    │   Auto-Update   │    │   Docker Networks       │ │
│  │  HTTPS Portal   │    │   Monitoring    │    │   DNS, Port Forward     │ │
│  │                 │    │   Stakers       │    │                         │ │
│  └─────────────────┘    └─────────────────┘    └─────────────────────────┘ │
├─────────────────────────────────────────────────────────────────────────────┤
│                          Docker Runtime                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                       Host Operating System                                │
│                      (Ubuntu/Debian Linux)                                │
└─────────────────────────────────────────────────────────────────────────────┘
```

## 🌐 Network Architecture

```
Internet
    │
    ▼
┌─────────────────┐
│     Router      │ ◄─── UPnP Port Forwarding
│   (Home/ISP)    │
└─────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────┐
│                  DAppNode Host System                       │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────┐   │
│  │              dncore_network                         │   │
│  │             172.33.0.0/16                          │   │
│  │                                                     │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐ │   │
│  │  │ DAppManager │  │ Bind DNS    │  │ User Pkgs   │ │   │
│  │  │ 172.33.1.7  │  │ 172.33.1.2  │  │ 172.33.x.x  │ │   │
│  │  └─────────────┘  └─────────────┘  └─────────────┘ │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │              staker_network                         │   │
│  │             172.34.0.0/16                          │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐ │   │
│  │  │ Execution   │  │ Consensus   │  │ Validator   │ │   │
│  │  │ Client      │  │ Client      │  │ Services    │ │   │
│  │  └─────────────┘  └─────────────┘  └─────────────┘ │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

## 📦 Package Installation Flow

```
User Request
     │
     ▼
┌─────────────────┐
│   Admin UI      │
│  (React App)    │
└─────────────────┘
     │
     ▼ API Call
┌─────────────────┐
│  DAppManager    │
│   (Backend)     │
└─────────────────┘
     │
     ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Ethereum      │    │      IPFS       │    │     Docker      │
│   Registry      │◄──►│   Content       │◄──►│   Container     │
│  (Metadata)     │    │ Distribution    │    │   Deployment    │
└─────────────────┘    └─────────────────┘    └─────────────────┘
     │                          │                       │
     ▼                          ▼                       ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Version       │    │   Package       │    │   Container     │
│  Resolution     │    │   Download      │    │   Startup       │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## ⚡ Staking Architecture

```
┌─────────────────────────────────────────────────────────────┐
│                    Ethereum Staking Stack                  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────────┐  │
│  │  Stakers UI  │◄─┤  Web3Signer  │◄─┤ Validator Keys   │  │
│  │ Management   │  │ & Key Brain  │  │  & Security      │  │
│  └──────────────┘  └──────────────┘  └──────────────────┘  │
│                                                             │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────────┐  │
│  │  Consensus   │◄─┤  Execution   │◄─┤   MEV Boost      │  │
│  │   Client     │  │   Client     │  │  (Optional)      │  │
│  │ (Beacon)     │  │  (Engine)    │  │                  │  │
│  └──────────────┘  └──────────────┘  └──────────────────┘  │
│        │                  │                  │             │
│        ▼                  ▼                  ▼             │
│  ┌──────────────────────────────────────────────────────┐  │
│  │              Ethereum Network                       │  │
│  │         (Mainnet, Testnet, etc.)                    │  │
│  └──────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

## 🔔 Notification System Flow

```
Event Sources
     │
     ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Package       │    │   Validator     │    │   System        │
│   Events        │───►│   Events        │───►│   Events        │
└─────────────────┘    └─────────────────┘    └─────────────────┘
     │                          │                       │
     ▼                          ▼                       ▼
┌─────────────────────────────────────────────────────────────────┐
│                  Notification Engine                           │
│              (Event Processing & Routing)                      │
└─────────────────────────────────────────────────────────────────┘
     │
     ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   WebPush       │    │   Webhooks      │    │   In-App        │
│ Notifications   │    │   (Discord,     │    │ Notifications   │
│                 │    │  Telegram, etc) │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## 📊 Data Flow Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          Data Layer                                        │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────────┐ │
│  │  Configuration  │  │   Application   │  │      Container Data         │ │
│  │      Data       │  │      State      │  │     (Volumes & Bind)        │ │
│  │  (JSON Files)   │  │  (Memory + DB)  │  │                             │ │
│  └─────────────────┘  └─────────────────┘  └─────────────────────────────┘ │
│           │                       │                         │               │
│           ▼                       ▼                         ▼               │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────────┐ │
│  │   /usr/src/     │  │   EventBus      │  │      /var/lib/docker        │ │
│  │   dappnode/     │  │  (In-Memory)    │  │       (Docker Data)         │ │
│  └─────────────────┘  └─────────────────┘  └─────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────┘
```

These diagrams provide a visual overview of DAppNode's architecture. For more detailed technical information, refer to the specific wiki pages for each component.